---
layout: page
title: Contact
permalink: /contact/
navtype: contact
---

<p>
  Click <a href="#" onclick="resetAndStartExecution()">here</a> to get my email address.
</p>

<pre><code id="program"></code></pre>

<p id="disclaimer"></p>

<script>
  let program = "+++++[->+++++[>+++++[>+>+>>+<<<<-s]r>>>>>+<<<<<<-]<]>>>+++[>>+<-<--]<<<++[->++[->++[->++<]<]<]>>>[->->>-<<<]>>>.--------.<.<<<<<++[->++[->++[->++<]<]<]>>>[>>>+<<<-s]r>>>-.<<<++++++[-<+<+<+>>>]>>>[-<<<+>>>]<<<<<<[->>>-<<<s]r>>>+.--.<<[->>-<<]>>.<[->-<]>.[->>>+<<<]>>>>---[>+>+>+<<<--]>[-<<+>>]<<.>>>[-<++<+>>]<<[-<+>]<-.>>[--<+>>+<]<[-<->]<--.>>>>+[<<+<+>>>--]<<<[-<+>]<-.<<+.>>+>>[-<<+>>]<<.+>>>[-<<<->>>]<<<.";
  let memory, pc, pcSkipEnd, head, output;
  let displayWidth = 37;

  let tickInterval;
  let speed = 0, speedIncrease = 0;

  function reset() {
    memory = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
    pc = 0;
    pcSkipEnd = 0;
    head = 0;
    speedIncrease = 0;
    output = "";
  }

  function skip() {
    let i = program[pc];
    pcSkipEnd = pc;
    do {
      pcSkipEnd += 1;
    }
    while('-+<>'.includes(i) && pcSkipEnd < program.length && program[pcSkipEnd] === i);
  }

  function tick() {
    let maxReps = (speedIncrease + speed) * Math.random();
    for (var reps = 0; reps < maxReps; reps++) {
      if (pc > program.length) {
        clearInterval(tickInterval);
        tickInterval = null;
        break;
      } else {
        let i = program[pc];
        if (i === '+') {
          memory[head] += pcSkipEnd - pc;
        } else if(i === '-') {
          memory[head] -= pcSkipEnd - pc;
        } else if(i === '<') {
          head -= pcSkipEnd - pc;
        } else if(i === '>') {
          head += pcSkipEnd - pc;
        } else if(i === '[') {
          if(memory[head] === 0) {
            var a, depth = 1;
            do {
              a = program[++pc];
              if (a === '[') {
                depth += 1;
              } else if(a === ']') {
                depth -= 1;
              }
            } while(a !== ']' || depth > 0);
          }
        } else if(i === ']') {
          if(memory[head] !== 0) {
            var a, depth = 1;
            do {
              a = program[--pc];
              if (a === ']') {
                depth += 1;
              } else if(a === '[') {
                depth -= 1;
              }
            } while(a !== '[' || depth > 0);
          }
        } else if(i === '.') {
          output += String.fromCharCode(memory[head]);
        } else if(i === ',') {
          // stop looking!
        } else if(i === 'r') {
          // resets tick speed
          speedIncrease = 0;
        } else if(i === 's') {
          // temporary speed up
          speedIncrease += 1;
        }
        pc = '[]'.includes(i) ? pc + 1 : pcSkipEnd;
        skip();
      }
      updateDisplay();
    }
  }

  function updateDisplay() {
    let element = document.getElementById("program");
    var h = "";
    var i = 0;
    for(var j = 0; j < program.length; j++) {
      let theCharacter = program[j];
      if(!'rs'.includes(theCharacter)) {
        h += "<span" + (i >= pc && i < pcSkipEnd ? ' class="email-pc"' : "") + ">" + theCharacter + "</span>" + ((i + 1) % displayWidth == 0 ? "\n" : "");
        i += 1;
      }
    }
    h += "\n\nMEM:";
    for(var i = 0; i < memory.length; i++) {
      h += " <span" + (i === head ? ' class="email-mem"' : "") + ">" + memory[i].toString(16).padStart(2, '0') + "</span>";
    }

    element.innerHTML = h
      + `\nOUT: ${output}`;
  }

  function resetAndStartExecution() {
    if (tickInterval !== null) {
      clearInterval(tickInterval);
      speed += 1;
    } else {
      speed = 1;
    }
    reset();
    updateDisplay();
    tickInterval = setInterval(tick, 10);
    document.getElementById("disclaimer").innerHTML = "If you're getting bored, it will run faster every time you hit the link.";
  }

  reset();
  skip();
  updateDisplay();
</script>
